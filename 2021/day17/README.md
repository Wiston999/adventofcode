# --- Day 17: Trick Shot ---

You finally decode the Elves' message. <code><span title="Maybe you need to turn the message 90 degrees counterclockwise?">HI</span></code>, the message says. You continue searching for the sleigh keys.


Ahead of you is what appears to be a large [https://en.wikipedia.org/wiki/Oceanic_trench](ocean trench). Could the keys have fallen into it? You'd better send a probe to investigate.


The probe launcher on your submarine can fire the probe with any [https://en.wikipedia.org/wiki/Integer](integer) velocity in the <code>x</code> (forward) and <code>y</code> (upward, or downward if negative) directions. For example, an initial <code>x,y</code> velocity like <code>0,10</code> would fire the probe straight up, while an initial velocity like <code>10,-1</code> would fire the probe forward at a slight downward angle.


The probe's <code>x,y</code> position starts at <code>0,0</code>. Then, it will follow some trajectory by moving in <em><b>steps</b></em>. On each step, these changes occur in the following order:


<ul>
<li>The probe's <code>x</code> position increases by its <code>x</code> velocity.</li>
<li>The probe's <code>y</code> position increases by its <code>y</code> velocity.</li>
<li>Due to drag, the probe's <code>x</code> velocity changes by <code>1</code> toward the value <code>0</code>; that is, it decreases by <code>1</code> if it is greater than <code>0</code>, increases by <code>1</code> if it is less than <code>0</code>, or does not change if it is already <code>0</code>.</li>
<li>Due to gravity, the probe's <code>y</code> velocity decreases by <code>1</code>.</li>
</ul>
For the probe to successfully make it into the trench, the probe must be on some trajectory that causes it to be within a <em><b>target area</b></em> after any step. The submarine computer has already calculated this target area (your puzzle input). For example:


<pre><code>target area: x=20..30, y=-10..-5</code></pre>
This target area means that you need to find initial <code>x,y</code> velocity values such that after any step, the probe's <code>x</code> position is at least <code>20</code> and at most <code>30</code>, <em><b>and</b></em> the probe's <code>y</code> position is at least <code>-10</code> and at most <code>-5</code>.


Given this target area, one initial velocity that causes the probe to be within the target area after any step is <code>7,2</code>:


<pre><code>.............#....#............
.......#..............#........
...............................
S........................#.....
...............................
...............................
...........................#...
...............................
....................TTTTTTTTTTT
....................TTTTTTTTTTT
....................TTTTTTTT#TT
....................TTTTTTTTTTT
....................TTTTTTTTTTT
....................TTTTTTTTTTT
</code></pre>
In this diagram, <code>S</code> is the probe's initial position, <code>0,0</code>. The <code>x</code> coordinate increases to the right, and the <code>y</code> coordinate increases upward. In the bottom right, positions that are within the target area are shown as <code>T</code>. After each step (until the target area is reached), the position of the probe is marked with <code>#</code>. (The bottom-right <code>#</code> is both a position the probe reaches and a position in the target area.)


Another initial velocity that causes the probe to be within the target area after any step is <code>6,3</code>:


<pre><code>...............#..#............
...........#........#..........
...............................
......#..............#.........
...............................
...............................
S....................#.........
...............................
...............................
...............................
.....................#.........
....................TTTTTTTTTTT
....................TTTTTTTTTTT
....................TTTTTTTTTTT
....................TTTTTTTTTTT
....................T#TTTTTTTTT
....................TTTTTTTTTTT
</code></pre>
Another one is <code>9,0</code>:


<pre><code>S........#.....................
.................#.............
...............................
........................#......
...............................
....................TTTTTTTTTTT
....................TTTTTTTTTT#
....................TTTTTTTTTTT
....................TTTTTTTTTTT
....................TTTTTTTTTTT
....................TTTTTTTTTTT
</code></pre>
One initial velocity that <em><b>doesn't</b></em> cause the probe to be within the target area after any step is <code>17,-4</code>:


<pre><code>S..............................................................
...............................................................
...............................................................
...............................................................
.................#.............................................
....................TTTTTTTTTTT................................
....................TTTTTTTTTTT................................
....................TTTTTTTTTTT................................
....................TTTTTTTTTTT................................
....................TTTTTTTTTTT..#.............................
....................TTTTTTTTTTT................................
...............................................................
...............................................................
...............................................................
...............................................................
................................................#..............
...............................................................
...............................................................
...............................................................
...............................................................
...............................................................
...............................................................
..............................................................#
</code></pre>
The probe appears to pass through the target area, but is never within it after any step. Instead, it continues down and to the right - only the first few steps are shown.


If you're going to fire a highly scientific probe out of a super cool probe launcher, you might as well do it with <em><b>style</b></em>. How high can you make the probe go while still reaching the target area?


In the above example, using an initial velocity of <code>6,9</code> is the best you can do, causing the probe to reach a maximum <code>y</code> position of <code><em><b>45</b></em></code>. (Any higher initial <code>y</code> velocity causes the probe to overshoot the target area entirely.)


Find the initial velocity that causes the probe to reach the highest <code>y</code> position and still eventually be within the target area after any step. <em><b>What is the highest <code>y</code> position it reaches on this trajectory?</b></em>


